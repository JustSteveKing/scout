# Global defaults
check_interval: 30s
timeout: 5s
retry_attempts: 3

# Service definitions
services:
  - name: api-production
    url: https://api.example.com
    health_endpoint: /health
    method: GET
    expected_status: 200
    # Option 1: Bearer token auth
    auth:
      type: bearer
      token: ${API_TOKEN}
    
  - name: staging-db
    url: https://db.staging.example.com:5432
    type: tcp  # Just check if port is open
    
  - name: redis-cache
    url: redis://localhost:6379
    type: redis
    
  - name: payments-service
    url: https://payments.example.com
    health_endpoint: /api/v1/status
    # Option 2: Basic auth
    auth:
      type: basic
      username: ${PAYMENTS_USER}
      password: ${PAYMENTS_PASS}
    
  - name: custom-headers
    url: https://custom.example.com
    health_endpoint: /status
    # Custom headers for requests (independent of auth)
    headers:
      X-Custom-Header: custom-value
      X-Request-ID: scout-health-check
      User-Agent: Scout/1.0
    # You can still use auth for Authorization header
    auth:
      type: bearer
      token: ${API_TOKEN}
  
  - name: api-with-json-assertions
    url: https://api.example.com
    health_endpoint: /health
    expected_status: 200
    # JSON path assertions to validate response structure
    json_assertions:
      # Check if status field equals "ok"
      - path: status
        value: "ok"
        operator: "=="
      
      # Check if uptime is greater than 0
      - path: uptime
        value: 0
        operator: ">"
      
      # Check if database is connected
      - path: dependencies.database
        value: true
        operator: "=="
      
      # Check if error message doesn't contain "fatal"
      - path: message
        value: "fatal"
        operator: "!="
      
      # Check if response contains a specific substring
      - path: version
        value: "1.0"
        operator: "contains"
  
  - name: tls-cert-check
    url: https://api.example.com
    type: tls
    # Check TLS certificate expiry
    tls_check: true
    tls_warning_days: 30  # Warn if certificate expires within 30 days
  
  - name: dns-resolution-check
    url: api.example.com
    type: dns
    # Check if DNS resolves successfully
    dns_check: true
  
  - name: api-latency-check
    url: https://api.example.com
    health_endpoint: /health
    type: latency
    # Check that response latency doesn't exceed threshold
    latency_check: true
    latency_threshold: 1000  # Max latency in milliseconds (1 second)
  
  - name: tcp-port-check
    url: db.example.com:5432
    type: tcp
    # Simple TCP port connectivity check
    tcp_ping_check: true
